<project>
  <description>Freestyle job configured for GitHub Webhook and Discord Notifications.</description>
  <!-- SCM Configuration: Git and Branch -->
  <scm class="hudson.plugins.git.GitSCM" plugin="git@4.13.0">
    <configVersion>2</configVersion>
    <userRemoteConfigs>
      <hudson.plugins.git.UserRemoteConfig>
        <!-- REPLACE with your GitHub repository URL -->
        <url>https://github.com/Gautam7352/Tasklist.git</url>
        <!-- NOTE: Credentials configuration would be included here if needed,
             but we omit it for a standard webhook setup that uses public HTTPS. -->
      </hudson.plugins.git.UserRemoteConfig>
    </userRemoteConfigs>
    <branches>
      <hudson.plugins.git.BranchSpec>
        <!-- REPLACE with your default branch name (e.g., main or master) -->
        <name>*/master</name>
      </hudson.plugins.git.BranchSpec>
    </branches>
    <doGenerateSubmoduleConfigurations>false</doGenerateSubmoduleConfigurations>
    <submoduleCfg class="empty-list"/>
    <extensions/>
  </scm>

  <!-- Trigger Configuration: GitHub hook trigger for GITScm polling -->
  <triggers>
    <!-- This tag enables the job to be triggered by the /github-webhook/ endpoint -->
    <com.cloudbees.jenkins.GitHubPushTrigger plugin="github@1.37.1">
      <!-- An empty spec means no scheduled polling; it relies solely on the webhook -->
      <spec></spec>
    </com.cloudbees.jenkins.GitHubPushTrigger>
  </triggers>

  <actions/>
  <keepDependencies>false</keepDependencies>
  <properties>
    <!-- Link the job back to the GitHub repository -->
    <com.coravy.hudson.plugins.github.GithubProjectProperty plugin="github@1.37.1">
      <projectUrl>https://github.com/Gautam7352/Tasklist/</projectUrl>
      <displayName></displayName>
    </com.coravy.hudson.plugins.github.GithubProjectProperty>
  </properties>

  <!-- Build Steps (Example: Simple Shell command) -->
  <builders>
    <hudson.tasks.Shell>
      <command>echo "----------------------------------------"
echo "Build triggered by GitHub push event!"
echo "Running application build and tests..."
echo "----------------------------------------"</command>
    </hudson.tasks.Shell>
  </builders>

  <!-- Post-build Actions: Discord Notifier -->
  <publishers>
    <jenkins.plugins.discordnotifier.DiscordNotifier plugin="discord-notifier@1.16">
      <!-- REPLACE with the actual Discord Webhook URL you created -->
      <webhookUrl>https://discord.com/api/webhooks/1421298527379914803/ianjUKMLD_SAaOBDN57W2NwbFQPhgkhuSKO0DwUswcFRYRbxVo5TQd-ryCAM_0Y1pKDn</webhookUrl>
      <!-- Configuration for which events to notify on -->
      <notifySuccess>true</notifySuccess>
      <notifyFailure>true</notifyFailure>
      <notifyAborted>true</notifyAborted>
      <notifyNotBuilt>true</notifyNotBuilt>
      <notifyUnstable>true</notifyUnstable>
      <notifyBackToNormal>true</notifyBackToNormal>
      <notifyRepeatedFailure>true</notifyRepeatedFailure>
      <includeCustomMessage>true</includeCustomMessage>
      <customMessage>Build $JOB_NAME #$BUILD_NUMBER finished. Status: $BUILD_STATUS</customMessage>
      <showChanges>true</showChanges>
      <showCommitList>true</showCommitList>
      <showTestDetails>true</showTestDetails>
      <userName>Jenkins-CI</userName>
      <includeDetails>true</includeDetails>
    </jenkins.plugins.discordnotifier.DiscordNotifier>
  </publishers>

  <!-- Default Freestyle project settings -->
  <concurrentBuild>false</concurrentBuild>
  <disabled>false</disabled>
</project>
